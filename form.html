<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Leftover Food</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <section class="section">
        <div class="container">
            <h1 class="title">Add Leftover Food</h1>

            <form id="foodForm">
                <div class="field">
                    <label class="label">Shopkeeper Name</label>
                    <div class="control">
                        <input class="input" type="text" id="shopkeeper_name" placeholder="Enter your name" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Phone Number</label>
                    <div class="control">
                        <input class="input" type="tel" id="phone_number" placeholder="Enter your phone number" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Food Description</label>
                    <div class="control">
                        <textarea class="textarea" id="food_description" placeholder="Describe the leftover food" required></textarea>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Quantity (e.g., 10 sandwiches)</label>
                    <div class="control">
                        <input class="input" type="number" id="quantity" placeholder="Enter quantity of food" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Address</label>
                    <div class="control">
                        <input class="input" type="text" id="address" placeholder="Enter your address" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Location</label>
                    <div class="control">
                        <input class="input" type="text" id="location" placeholder="Enter your location" required>
                    </div>
                </div>

                <div class="control">
                    <button class="button is-primary" type="submit">Submit</button>
                </div>
            </form>
        </div>
    </section>

    <script>
        const foodForm = document.getElementById('foodForm');

        foodForm.addEventListener('submit', function(event) {
            event.preventDefault();

            const shopkeeperName = document.getElementById('shopkeeper_name').value;
            const phoneNumber = document.getElementById('phone_number').value;
            const foodDescription = document.getElementById('food_description').value;
            const quantity = document.getElementById('quantity').value;
            const address = document.getElementById('address').value;
            const location = document.getElementById('location').value;

            // Create a new food object
            const newFood = {
                shopkeeperName,
                phoneNumber,
                foodDescription,
                quantity: parseInt(quantity),
                address,
                location
            };

            // Retrieve existing foods from localStorage, or start with an empty array
            let foods = JSON.parse(localStorage.getItem('foods')) || [];

            // Add the new food to the foods array
            foods.push(newFood);

            // Save the updated foods array back to localStorage
            localStorage.setItem('foods', JSON.stringify(foods));

            alert("Food added successfully!");
            window.location.href = 'purchase.html';
        });
    </script>
</body>
</html>

